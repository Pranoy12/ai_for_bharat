# Requirements Document: Aushadh-Verify

## Introduction

Aushadh-Verify is an end-to-end Agentic AI solution that serves as a "Phygital Shield" against counterfeit drugs in rural India. The system combines physical AI (visual verification), digital trust (blockchain traceability), and vernacular voice interfaces to enable pharmacists and patients with low digital literacy to verify medicine authenticity. The solution addresses the critical public health challenge where counterfeit medicines kill thousands annually, and current QR code verification methods are easily faked. The system is designed as a mobile-first application that operates in low-connectivity environments through offline Edge AI capabilities.

## Glossary

- **System**: The Aushadh-Verify platform including mobile app, backend services, and AI agents
- **Visual_Verification_Agent**: Physical AI service that analyzes medicine packaging using Amazon Rekognition Custom Labels for sub-pixel texture and font kerning analysis
- **Traceability_Agent**: Blockchain service that validates medicine batch information against Amazon QLDB immutable ledger
- **Enforcement_Agent**: Autonomous service that generates and submits counterfeit detection reports to authorities with GPS location data
- **Vernacular_Voice_Interface**: Multi-modal interface using Amazon Transcribe and Amazon Polly for Hindi/Marathi voice interaction
- **Golden_Image**: Reference image dataset of authentic medicine packaging used for comparison
- **Medicine_Strip**: Physical blister pack or strip packaging containing medicine tablets/capsules
- **Batch_ID**: Unique identifier printed on medicine packaging linking to manufacturing and supply chain data
- **CDSCO**: Central Drugs Standard Control Organization (Indian regulatory authority)
- **Edge_AI_Model**: Lightweight TensorFlow Lite model that runs locally on mobile devices for offline verification
- **Counterfeit_Medicine**: Fake or substandard pharmaceutical product that fails authenticity verification
- **User**: Rural pharmacist, patient, or healthcare worker with low digital literacy using the system
- **Offline_Mode**: System operation without internet connectivity using local TensorFlow Lite processing
- **Verification_Result**: Output indicating whether medicine is authentic, counterfeit, suspicious, or inconclusive
- **Synthetic_Data**: Training data generated by Amazon SageMaker to simulate micro-defects without requiring real counterfeit samples
- **Sub_Pixel_Analysis**: Computer vision technique analyzing packaging texture and font kerning at microscopic detail level
- **Micro_Defect**: Subtle packaging imperfection detectable through sub-pixel analysis (texture irregularities, font spacing errors)
- **Refilled_Bottle**: Suspicious case where physical packaging appears authentic but blockchain shows recall or different distribution
- **Digital_Desert**: Rural area with limited or no internet connectivity
- **Guardrails**: Amazon Bedrock constraints preventing AI from providing medical advice beyond verification scope

## Requirements

### Requirement 1: Visual Medicine Verification with Sub-Pixel Analysis

**User Story:** As a rural pharmacist, I want to verify medicine authenticity by capturing a photo of the medicine strip with sub-pixel texture analysis, so that I can detect sophisticated counterfeits that fool simple QR code checks.

#### Acceptance Criteria

1. WHEN a User captures a photo of a Medicine_Strip, THE Visual_Verification_Agent SHALL accept images in JPEG, PNG, or HEIC formats with minimum resolution of 1920x1080 pixels
2. WHEN an image is submitted, THE Visual_Verification_Agent SHALL perform Sub_Pixel_Analysis on packaging texture and font kerning using Amazon Rekognition Custom Labels
3. WHEN analyzing packaging, THE Visual_Verification_Agent SHALL detect Micro_Defects including texture irregularities, font spacing errors, and color inconsistencies
4. WHEN comparing against Golden_Images, THE Visual_Verification_Agent SHALL analyze texture patterns at sub-pixel precision within 5 seconds for online mode
5. WHEN texture analysis is complete, THE Visual_Verification_Agent SHALL generate a confidence score between 0.0 and 1.0
6. WHEN the confidence score is above 0.85, THE System SHALL classify the medicine as authentic
7. WHEN the confidence score is below 0.60, THE System SHALL classify the medicine as counterfeit
8. WHEN the confidence score is between 0.60 and 0.85, THE System SHALL classify the result as inconclusive and recommend additional verification
9. WHEN image quality is insufficient for Sub_Pixel_Analysis, THE Visual_Verification_Agent SHALL reject the image and provide specific feedback on lighting, focus, or distance requirements

### Requirement 2: Batch ID Extraction and OCR

**User Story:** As a system component, I want to extract batch identification from medicine packaging, so that blockchain verification can be performed.

#### Acceptance Criteria

1. WHEN a medicine image is processed, THE System SHALL extract text from the image using OCR
2. WHEN text extraction is complete, THE System SHALL identify the Batch_ID using pattern matching
3. WHEN multiple text patterns are detected, THE System SHALL prioritize Batch_ID formats matching Indian pharmaceutical standards
4. WHEN Batch_ID extraction fails, THE System SHALL return an error indicating manual entry is required
5. WHEN a Batch_ID is successfully extracted, THE System SHALL validate the format before blockchain query

### Requirement 3: Blockchain Supply Chain Verification with Refill Detection

**User Story:** As a user, I want the system to verify medicine supply chain history through blockchain and detect refilled bottles, so that I can identify medicines that may be physically authentic but improperly distributed.

#### Acceptance Criteria

1. WHEN a valid Batch_ID is obtained, THE Traceability_Agent SHALL query Amazon QLDB immutable ledger within 3 seconds
2. WHEN querying the ledger, THE Traceability_Agent SHALL retrieve manufacturing date, manufacturer identity, distribution chain records, and recall status
3. WHEN ledger data is retrieved, THE Traceability_Agent SHALL verify that the supply chain is complete and unbroken
4. WHEN the Batch_ID does not exist in the ledger, THE Traceability_Agent SHALL flag the medicine as potentially counterfeit
5. WHEN supply chain records show anomalies, THE Traceability_Agent SHALL flag specific discrepancies
6. WHEN physical texture matches authentic BUT blockchain status indicates "Recalled", THE System SHALL classify as "Suspicious (Refilled Bottle)"
7. WHEN physical texture matches authentic BUT blockchain shows the batch was sold in a different geographic region, THE System SHALL classify as "Suspicious (Refilled Bottle)"
8. WHEN blockchain verification succeeds, THE System SHALL combine blockchain results with visual verification results to produce final classification

### Requirement 4: Offline Verification with TensorFlow Lite Edge AI

**User Story:** As a rural pharmacist in a Digital_Desert with limited internet connectivity, I want to verify medicines offline using local AI processing, so that I can protect customers even without network access.

#### Acceptance Criteria

1. WHEN the mobile app is installed, THE System SHALL download the TensorFlow Lite Edge_AI_Model to local storage
2. WHEN internet connectivity is unavailable, THE System SHALL automatically switch to Offline_Mode
3. WHILE operating in Offline_Mode, THE Edge_AI_Model SHALL perform visual verification using local TensorFlow Lite processing
4. WHEN in Offline_Mode, THE Edge_AI_Model SHALL provide instant Pass/Fail classification based on basic visual markers
5. WHEN in Offline_Mode, THE System SHALL store verification requests in a local queue with captured images and metadata
6. WHEN internet connectivity is restored, THE System SHALL synchronize queued verifications with AWS cloud backend for full analysis
7. WHILE in Offline_Mode, THE System SHALL display a clear indicator that blockchain verification and sub-pixel analysis are unavailable
8. WHEN offline verification is complete, THE System SHALL provide results within 8 seconds
9. WHEN the Edge_AI_Model is outdated, THE System SHALL update it automatically when connectivity is available

### Requirement 5: Autonomous Enforcement Reporting with GPS Location

**User Story:** As a system enforcing pharmaceutical safety, I want to autonomously report detected counterfeit medicines to authorities with GPS location data, so that enforcement action can be taken promptly at the exact location.

#### Acceptance Criteria

1. WHEN a medicine is classified as counterfeit, THE Enforcement_Agent SHALL automatically initiate report generation
2. WHEN generating a report, THE Enforcement_Agent SHALL capture GPS coordinates using Amazon Location Service
3. WHEN generating a report, THE Enforcement_Agent SHALL include Batch_ID, verification timestamp, GPS location, pharmacy details, and evidence images
4. WHEN generating report content, THE Enforcement_Agent SHALL use Amazon Bedrock to create a structured formal grievance document
5. WHEN the report is complete, THE Enforcement_Agent SHALL submit it to CDSCO through their official API
6. WHEN submission succeeds, THE System SHALL store a confirmation receipt with submission timestamp and reference number
7. WHEN submission fails, THE System SHALL retry submission up to 3 times with exponential backoff
8. WHEN all retries fail, THE System SHALL queue the report for manual review and notify system administrators
9. WHEN GPS location is unavailable, THE Enforcement_Agent SHALL use the last known location with a timestamp indicating staleness

### Requirement 6: Vernacular Voice Interface for Low Digital Literacy Users

**User Story:** As a user with low digital literacy who may not read English, I want to interact with the system using voice in my local language, so that I can understand verification results clearly without reading complex reports.

#### Acceptance Criteria

1. WHEN a User speaks a query, THE Vernacular_Voice_Interface SHALL transcribe audio using Amazon Transcribe
2. WHEN transcribing audio, THE Vernacular_Voice_Interface SHALL support Hindi and Marathi languages
3. WHEN a User asks "Is this real?" or equivalent in Hindi/Marathi, THE System SHALL process the query and provide verification results
4. WHEN processing voice queries, THE System SHALL use Amazon Bedrock (Claude 3.5 Sonnet) to understand medical verification context
5. WHEN a counterfeit medicine is detected, THE System SHALL generate a voice warning stating "This is fake, do not consume" using Amazon Polly
6. WHEN generating voice output, THE System SHALL use the User's selected language (Hindi or Marathi)
7. WHEN no language preference is set, THE System SHALL default to Hindi
8. WHEN playing voice warnings, THE System SHALL clearly state the medicine name, verification result, and recommended action in simple language
9. WHEN voice output is complete, THE System SHALL provide an option to replay the warning
10. WHEN the User has set a language preference, THE System SHALL persist that preference for future sessions

### Requirement 7: Golden Image Dataset Management

**User Story:** As a system administrator, I want to manage the Golden Image dataset, so that the visual verification system has accurate reference images for comparison.

#### Acceptance Criteria

1. WHEN new authentic medicine images are available, THE System SHALL allow authorized administrators to upload them
2. WHEN uploading Golden_Images, THE System SHALL validate image quality and resolution requirements
3. WHEN a Golden_Image is uploaded, THE System SHALL extract and store texture features for comparison
4. WHEN multiple images exist for the same medicine, THE System SHALL maintain version history
5. WHEN the dataset is updated, THE System SHALL synchronize changes to the Edge_AI_Model within 24 hours

### Requirement 8: Synthetic Training Data Generation with Amazon SageMaker

**User Story:** As a system developer, I want to generate synthetic training data using Amazon SageMaker, so that the vision model can be trained to detect micro-defects without requiring thousands of real counterfeit samples.

#### Acceptance Criteria

1. WHEN training data is needed, THE System SHALL generate Synthetic_Data by applying controlled degradations to Golden_Images using Amazon SageMaker
2. WHEN generating Synthetic_Data, THE System SHALL apply variations including texture distortion, font kerning errors, color shifts, and printing defects
3. WHEN generating Synthetic_Data, THE System SHALL simulate Micro_Defects at sub-pixel level to train the model for sophisticated counterfeit detection
4. WHEN synthetic data is generated, THE System SHALL label each image with the type, severity, and location of applied defects
5. WHEN the synthetic dataset is complete, THE System SHALL maintain a balanced ratio of authentic to counterfeit samples (minimum 1:1 ratio)
6. WHEN model training occurs, THE System SHALL use both real Golden_Images and Synthetic_Data
7. WHEN Synthetic_Data quality is validated, THE System SHALL ensure generated defects are realistic and representative of actual counterfeit patterns

### Requirement 9: AI Guardrails for Responsible Medical Verification

**User Story:** As a system designer, I want to implement Amazon Bedrock Guardrails to prevent false positives and ensure the AI stays within verification scope, so that the system does not provide medical advice beyond authenticity verification.

#### Acceptance Criteria

1. WHEN verification confidence is below the authentic threshold, THE System SHALL require secondary verification before final classification
2. WHEN a medicine is flagged as counterfeit, THE System SHALL provide detailed reasoning including specific visual discrepancies and blockchain anomalies
3. WHEN Users report false positives, THE System SHALL log the feedback with images for model improvement
4. WHEN the false positive rate exceeds 5% in any 30-day period, THE System SHALL alert administrators for model review
5. WHEN displaying results, THE System SHALL clearly communicate confidence levels and uncertainty
6. WHEN verification is inconclusive, THE System SHALL recommend consulting a qualified pharmacist rather than making a definitive claim
7. WHEN using Amazon Bedrock for text generation, THE System SHALL apply Guardrails to prevent medical advice beyond verification scope
8. WHEN a User asks medical questions unrelated to verification, THE System SHALL respond that it only verifies authenticity and cannot provide medical advice
9. WHEN generating voice or text responses, THE System SHALL avoid definitive medical claims about drug efficacy or treatment recommendations

### Requirement 10: User Authentication and Data Privacy

**User Story:** As a user, I want my verification activities to be secure and private, so that my data is protected and only authorized personnel can access enforcement reports.

#### Acceptance Criteria

1. WHEN a User first launches the app, THE System SHALL require registration with phone number verification
2. WHEN authentication is required, THE System SHALL support OTP-based login
3. WHEN storing user data, THE System SHALL encrypt personally identifiable information at rest
4. WHEN transmitting data, THE System SHALL use TLS 1.3 or higher for all network communications
5. WHEN accessing enforcement reports, THE System SHALL restrict access to authorized CDSCO personnel only
6. WHEN a User requests data deletion, THE System SHALL remove personal data within 30 days while retaining anonymized verification statistics

### Requirement 11: System Monitoring and Performance

**User Story:** As a system administrator, I want to monitor system performance and reliability, so that I can ensure the service meets quality standards for rural users.

#### Acceptance Criteria

1. WHEN the System is operational, THE System SHALL log all verification requests with timestamps and results
2. WHEN system performance degrades, THE System SHALL alert administrators when response times exceed 10 seconds
3. WHEN the Edge_AI_Model accuracy drops below 90%, THE System SHALL trigger a model retraining workflow
4. WHEN monitoring metrics, THE System SHALL track daily verification volume, success rates, and counterfeit detection rates
5. WHEN generating reports, THE System SHALL provide weekly summaries to administrators including system health metrics

### Requirement 12: Mobile Application User Interface

**User Story:** As a rural user with limited technical expertise, I want a simple and intuitive mobile interface, so that I can easily verify medicines without confusion.

#### Acceptance Criteria

1. WHEN the User opens the app, THE System SHALL display a prominent "Verify Medicine" button on the home screen
2. WHEN capturing images, THE System SHALL provide real-time guidance for proper photo alignment and lighting
3. WHEN verification is in progress, THE System SHALL display a clear progress indicator
4. WHEN results are ready, THE System SHALL use color-coded indicators (green for authentic, red for counterfeit, yellow for inconclusive, orange for suspicious)
5. WHEN displaying results, THE System SHALL use simple language and avoid technical jargon
6. WHEN the User needs help, THE System SHALL provide contextual help text in the User's selected language

### Requirement 13: Microservices Architecture and Service Communication

**User Story:** As a system architect, I want the system built using microservices architecture, so that each agent can scale independently and the system is maintainable.

#### Acceptance Criteria

1. WHEN the system is deployed, THE System SHALL implement separate microservices for Visual_Verification_Agent, Traceability_Agent, Enforcement_Agent, and Vernacular_Voice_Interface
2. WHEN microservices communicate, THE System SHALL use asynchronous message queues for inter-service communication
3. WHEN a verification request is initiated, THE System SHALL orchestrate multiple agents through an API gateway
4. WHEN any microservice fails, THE System SHALL isolate the failure and continue operating with degraded functionality
5. WHEN microservices are updated, THE System SHALL support independent deployment without affecting other services
6. WHEN monitoring system health, THE System SHALL track each microservice independently with separate health check endpoints
7. WHEN scaling is required, THE System SHALL allow horizontal scaling of individual microservices based on load
